schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/ChestDiagnosisClassifier/pipeline/stage_1_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 4586463a03514b20323376931b926fe3
      size: 582
    - path: src/ChestDiagnosisClassifier/pipeline/stage_1_data_ingestion.py
      hash: md5
      md5: 8335c4612e7790f52b47f68346c17044
      size: 937
    outs:
    - path: artifacts/data_ingestion/chest data
      hash: md5
      md5: b872eecd4352d32d2a2935ed6baacabb.dir
      size: 41715346
      nfiles: 263
  prepare_base_model:
    cmd: python src/ChestDiagnosisClassifier/pipeline/stage_2_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 4586463a03514b20323376931b926fe3
      size: 582
    - path: src/ChestDiagnosisClassifier/pipeline/stage_2_prepare_base_model.py
      hash: md5
      md5: 7cab0c44b7fc2928b79c4227e3bb24d1
      size: 1032
    params:
      params.yaml:
        CLASSES: 2
        IMAGE_SIZE:
        - 256
        - 256
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.001
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: dbf6a4a5da0c658d28550441e1324d41.dir
      size: 118116000
      nfiles: 2
  training:
    cmd: python src/ChestDiagnosisClassifier/pipeline/stage_3_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/chest data
      hash: md5
      md5: b872eecd4352d32d2a2935ed6baacabb.dir
      size: 41715346
      nfiles: 263
    - path: artifacts/prepare_base_model
      hash: md5
      md5: dbf6a4a5da0c658d28550441e1324d41.dir
      size: 118116000
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 4586463a03514b20323376931b926fe3
      size: 582
    - path: src/ChestDiagnosisClassifier/pipeline/stage_3_model_trainer.py
      hash: md5
      md5: 2c79b2c995a7b81c4be4ec769cdfc2cc
      size: 955
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        EPOCHS: 500
        IMAGE_SIZE:
        - 256
        - 256
        - 3
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: b4decb87ff620da44a743c2179d95652
      size: 59460400
  evaluation:
    cmd: python src/ChestDiagnosisClassifier/pipeline/stage_4_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/chest data
      hash: md5
      md5: b872eecd4352d32d2a2935ed6baacabb.dir
      size: 41715346
      nfiles: 263
    - path: artifacts/training/model.h5
      hash: md5
      md5: b4decb87ff620da44a743c2179d95652
      size: 59460400
    - path: config/config.yaml
      hash: md5
      md5: 4586463a03514b20323376931b926fe3
      size: 582
    - path: src/ChestDiagnosisClassifier/pipeline/stage_4_model_evaluation.py
      hash: md5
      md5: 4d75420edc778e355a1b835e727c7ae0
      size: 961
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 256
        - 256
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 11e514bc9f17f0a1f59bb0f5be19e872
      size: 60
